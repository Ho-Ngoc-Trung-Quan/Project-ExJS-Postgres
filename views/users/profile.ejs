<style>
    /* Header section */
    .profile-header, .error-message {
      background: url('https://via.placeholder.com/1200x400') no-repeat center center/cover;
      color: white;
      padding: 60px 0;
      text-align: center;
    }
  
    .profile-header h1 {
      font-size: 2.5rem;
      font-weight: bold;
    }
  
    .profile-header p {
      margin-top: 10px;
      font-size: 1.2rem;
      font-weight: 300;
    }
  
    /* Profile card */
    .profile-card {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      background: white;
      border-radius: 15px;
      box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.1);
      margin: -50px auto 20px;
      padding: 30px;
      max-width: 900px;
    }
  
    .profile-avatar {
      flex-shrink: 0;
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #ffa726;
      margin-right: 20px;
    }
  
    .profile-info {
      flex-grow: 1;
    }
  
    .profile-info h2 {
      font-size: 1.8rem;
      font-weight: bold;
      margin-bottom: 10px;
    }
  
    .profile-info p {
      margin: 5px 0;
      color: #555;
      line-height: 1.6;
    }
  
    .profile-actions {
      margin-top: 20px;
    }
  
    .btn-custom {
      background-color: #ffa726;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      margin: 5px;
      transition: background-color 0.3s;
    }
  
    .btn-custom:hover {
      background-color: #ff9800;
    }
  
    .btn-danger {
      background-color: #f44336;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      margin: 5px;
      transition: background-color 0.3s;
    }
  
    .btn-danger:hover {
      background-color: #d32f2f;
    }
  
    /* Activity section */
    .history {
      margin-top: 30px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
  
    .history h5 {
      font-size: 1.5rem;
      color: #333;
      margin-bottom: 15px;
      text-align: left;
    }
  
    .list-group-item {
      border: none;
      padding: 15px 20px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 10px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
  
    .badge {
      padding: 10px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
    }
  
    .badge.bg-success {
      background-color: #4caf50;
      color: white;
    }
  
    .badge.bg-warning {
      background-color: #ffa726;
      color: white;
    }
  
    .badge.bg-primary {
      background-color: #2196f3;
      color: white;
    }
  </style>

<% if (!user) { %>
  <div class="error-message">
    <h1><%= title || 'Access Denied' %></h1>
    <h3><%= error || 'You must log in to view this page.' %></h3>
    <a href="/users/signin" class="btn btn-primary">Log In</a>
  </div>
<% } else { %>
<!-- Header -->
<div class="profile-header">
    <h1>Welcome, <%= user.name %>!</h1>
    <h3>Explore your personalized Virgo dashboard.</h3>
  </div>
  
  <!-- Profile Card -->
  <div class="profile-card">
    <img src="<%= user.avatar || 'img/team-1.jpg' %>" alt="Avatar" class="profile-avatar">
    <div class="profile-info">
      <h2><%= user.name %></h2>
      <p><strong>Email:</strong> <%= user.email %></p>
      <p><strong>Phone:</strong> <%= user.phone || 'Not provided' %></p>
      <p><strong>Address:</strong> <%= user.address || 'Not provided' %></p>
      <p><strong>Joined:</strong> <%= new Date(user.createdAt).toLocaleDateString() %></p>
      <div class="profile-actions">
        <a href="/users/edit" class="btn btn-custom">Edit Profile</a>
        <a href="/users/change-password" class="btn btn-custom">Change Password</a>
        <a href="/users/logout" class="btn btn-danger">Logout</a>
      </div>
    </div>
  </div>
  
  <!-- Activity Section -->
  <div class="container history">
    <h5>Booking History</h5>
    <% if (user.bookings && user.bookings.length > 0) { %>
      <ul class="list-group">
        <% user.bookings.forEach(booking => { %>
          <li class="list-group-item">
            <span>Table #<%= booking.tableNumber %> - <%= new Date(booking.date).toLocaleDateString() %></span>
            <span class="badge bg-<%= booking.status === 'Completed' ? 'success' : 'warning' %>">
              <%= booking.status %>
            </span>
          </li>
        <% }); %>
      </ul>
    <% } else { %>
      <p>No bookings found. <a href="/booking" class="text-primary">Book now</a>!</p>
    <% } %>
  
    <h5 class="mt-4">Order History</h5>
    <% if (user.orders && user.orders.length > 0) { %>
      <ul class="list-group">
        <% user.orders.forEach(order => { %>
          <li class="list-group-item">
            <span>Order #<%= order.id %> - <%= new Date(order.date).toLocaleDateString() %></span>
            <span class="badge bg-primary">$<%= order.total.toFixed(2) %></span>
          </li>
        <% }); %>
      </ul>
    <% } else { %>
      <p>No orders found. <a href="/menu" class="text-primary">Order now</a>!</p>
    <% } %>
  </div>
<% } %>